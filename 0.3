import tkinter as tk
from tkinter import messagebox
from tkinter import ttk

# List to store all ratings
all_ratings = []

# Function to submit ratings
def submit_ratings():
    try:
        food = int(food_entry.get())
        road = int(road_entry.get())
        education = int(education_entry.get())
        water = int(water_entry.get())
        electricity = int(electricity_entry.get())

        # Validate ratings
        if any(r < 1 or r > 5 for r in [food, road, education, water, electricity]):
            messagebox.showerror("Error", "Please enter ratings between 1 and 5")
            return

        # Store ratings
        rating = {
            "Food": food,
            "Road": road,
            "Education": education,
            "Water": water,
            "Electricity": electricity
        }
        all_ratings.append(rating)

        # Insert into table
        tree.insert("", "end", values=(food, road, education, water, electricity))

        # Update averages
        update_averages()

        # Clear entries
        food_entry.delete(0, tk.END)
        road_entry.delete(0, tk.END)
        education_entry.delete(0, tk.END)
        water_entry.delete(0, tk.END)
        electricity_entry.delete(0, tk.END)

    except ValueError:
        messagebox.showerror("Error", "Please enter valid numbers")

# Function to calculate and display averages
def update_averages():
    if not all_ratings:
        return
    averages = {
        "Food": sum(r["Food"] for r in all_ratings)/len(all_ratings),
        "Road": sum(r["Road"] for r in all_ratings)/len(all_ratings),
        "Education": sum(r["Education"] for r in all_ratings)/len(all_ratings),
        "Water": sum(r["Water"] for r in all_ratings)/len(all_ratings),
        "Electricity": sum(r["Electricity"] for r in all_ratings)/len(all_ratings),
    }
    avg_label.config(text="\n".join(f"{key} Average: {value:.2f}" for key, value in averages.items()))

# Create main window
root = tk.Tk()
root.title("Community Service Ratings Dashboard")
root.geometry("600x500")

# Input frame
input_frame = tk.Frame(root)
input_frame.pack(pady=10)

tk.Label(input_frame, text="Rate the following services (1-5):", font=("Arial", 14)).grid(row=0, column=0, columnspan=2, pady=5)

tk.Label(input_frame, text="Food Quality:").grid(row=1, column=0, sticky="e")
food_entry = tk.Entry(input_frame)
food_entry.grid(row=1, column=1)

tk.Label(input_frame, text="Road Quality:").grid(row=2, column=0, sticky="e")
road_entry = tk.Entry(input_frame)
road_entry.grid(row=2, column=1)

tk.Label(input_frame, text="Education Quality:").grid(row=3, column=0, sticky="e")
education_entry = tk.Entry(input_frame)
education_entry.grid(row=3, column=1)

tk.Label(input_frame, text="Water Quality:").grid(row=4, column=0, sticky="e")
water_entry = tk.Entry(input_frame)
water_entry.grid(row=4, column=1)

tk.Label(input_frame, text="Electricity Availability:").grid(row=5, column=0, sticky="e")
electricity_entry = tk.Entry(input_frame)
electricity_entry.grid(row=5, column=1)

submit_button = tk.Button(input_frame, text="Submit Ratings", command=submit_ratings)
submit_button.grid(row=6, column=0, columnspan=2, pady=10)

# Table frame
table_frame = tk.Frame(root)
table_frame.pack(pady=10)

columns = ("Food", "Road", "Education", "Water", "Electricity")
tree = ttk.Treeview(table_frame, columns=columns, show="headings", height=8)
for col in columns:
    tree.heading(col, text=col)
    tree.column(col, width=100, anchor="center")
tree.pack()

# Average ratings
avg_label = tk.Label(root, text="Averages will appear here", font=("Arial", 12), justify="left")
avg_label.pack(pady=10)

root.mainloop()
